# -*- mode: makefile; -*-
# MMLLAR, available in the environment, is the list of articles in the MML
MMLLAR=$(shell head -n 10 $(MIZFILES)/mml.lar) tarski
DEP-MAKEFILES = $(patsubst %, %.dep, $(MMLLAR))
EVL-FILES = $(patsubst %, %.evl, $(MMLLAR))
MIZ = $(patsubst %, %.miz, $(MMLLAR))

.PHONY: deps
.PHONY: $(patsubst %, %-dep, $(MMLLAR))

.SECONDARY: $(patsubst %, %.evl, $(MMLLAR))

deps: $(DEP-MAKEFILES)
evls: $(EVL-FILES)

%.evl: %.miz
	envget $*.miz;

%.dep: %.evl
	xsltproc --output $*.dep ../xsl/evl2dep.xsl $*.evl;
